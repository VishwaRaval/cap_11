# YOLOv11 Hyperparameters for Underwater Fish Detection
# Tailored for edge deployment with conservative augmentations
# Dataset is already preprocessed by Roboflow (768x432, auto-contrast, brightness jitter)

# Learning rate settings
lr0: 0.01  # initial learning rate (SGD=1E-2, Adam=1E-3)
lrf: 0.01  # final OneCycleLR learning rate (lr0 * lrf)
momentum: 0.937  # SGD momentum/Adam beta1
weight_decay: 0.0005  # optimizer weight decay 5e-4
warmup_epochs: 3.0  # warmup epochs (fractions ok)
warmup_momentum: 0.8  # warmup initial momentum
warmup_bias_lr: 0.1  # warmup initial bias lr

# Loss weights
box: 7.5  # box loss gain
cls: 0.5  # cls loss gain
dfl: 1.5  # dfl loss gain

# Data augmentation settings - CONSERVATIVE for underwater scenes
# Roboflow already applied: resize 768x432, auto-contrast, brightness jitter, salt-pepper noise

# Geometric augmentations (VERY CONSERVATIVE - avoid distorting underwater geometry)
degrees: 5.0  # image rotation (+/- deg) - very small to preserve orientation
translate: 0.1  # image translation (+/- fraction) - small shifts only
scale: 0.3  # image scale (+/- gain) - moderate scaling
shear: 2.0  # image shear (+/- deg) - minimal shear
perspective: 0.0001  # image perspective (+/- fraction), range 0-0.001 - almost none
flipud: 0.0  # CRITICAL: NO vertical flip (unrealistic for underwater)
fliplr: 0.5  # horizontal flip (50% probability - fish can swim either direction)

# Photometric augmentations (MILD - Roboflow already did brightness/contrast)
hsv_h: 0.01  # image HSV-Hue augmentation (fraction) - minimal hue shift for underwater
hsv_s: 0.4  # image HSV-Saturation augmentation (fraction) - moderate for water color variation
hsv_v: 0.2  # image HSV-Value augmentation (fraction) - mild brightness variation

# Additional augmentations
mosaic: 1.0  # enable mosaic augmentation (probability)
mixup: 0.0  # mixup augmentation (probability) - disabled for cleaner fish detection
copy_paste: 0.0  # copy-paste augmentation (probability) - disabled

# Other training settings
close_mosaic: 10  # disable mosaic augmentation for final N epochs